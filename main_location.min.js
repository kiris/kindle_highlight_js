!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var highlight=function(doc){this.doc=doc};highlight.prototype.getTitle=function(){return this.doc.querySelector(".a-spacing-top-small.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-spacing-none.a-spacing-top-micro").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],2:[function(require,module,exports){var highlightFormatter=function(){var Highlight,util=require("./util"),ua=navigator.userAgent;Highlight=0<ua.indexOf("iPhone")||0<ua.indexOf("iPod")||0<ua.indexOf("Android")&&0<ua.indexOf("Mobile")?require("./highlight_sp"):require("./highlight"),util.defineInnerTextForFirefox(),this.highlight=new Highlight(document),this.highlight_markdown=[]};highlightFormatter.prototype.output=function(option){null==option&&(option={}),this.outputBookInfo(),this.outputHighlightInfo(option),this.outputExecute()},highlightFormatter.prototype.outputExecute=function(){document.title=this.highlight.getTitle(),document.body.removeAttribute("class"),document.body.style.fontFamily="arial,sans-serif",document.body.style.fontSize=".75em",document.body.style.color="#333",document.body.style.lineHeight="1.5em";var element=document.createElement("textarea");element.value=this.highlight_markdown.join("\n"),document.body.innerHTML="",document.body.appendChild(element)},highlightFormatter.prototype.outputBookInfo=function(){this.highlight_markdown.push("# 概要"),this.highlight_markdown.push("* *タイトル:* "+this.highlight.getTitle()),this.highlight_markdown.push("* *著者:* "+this.highlight.getAuthor()),this.highlight_markdown.push("* *ASIN:* "+this.highlight.getAsin()),this.highlight_markdown.push(""),this.highlight_markdown.push("[商品ページ](http://www.amazon.co.jp/dp/"+this.highlight.getAsin()+")")},highlightFormatter.prototype.outputHighlightInfo=function(option){for(var i=0,len=this.highlight.getHighlightLength();i<len;i++){var highlight=this.highlight.getHighlightTags()[i];if(highlight&&(this.highlight_markdown.push("```"),this.highlight_markdown.push(highlight.innerText),this.highlight_markdown.push("```"),!0===option.with_location)){var locationNo=this.highlight.getLocationTags()[i].innerText.match(/\d+(,?)(\d+)?/)[0].replace(/,/,"");this.highlight_markdown.push("[Read more at location "+locationNo+"](kindle://book?action=open&asin="+this.highlight.getAsin()+"&location="+locationNo+")")}}},module.exports=highlightFormatter},{"./highlight":1,"./highlight_sp":3,"./util":5}],3:[function(require,module,exports){var highlight=function(doc){this.doc=doc};highlight.prototype.getTitle=function(){return this.doc.querySelector("h3.a-spacing-top-mini.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-size-small.a-color-secondary").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],4:[function(require,module,exports){!function(d){"use strict";(new(require("./highlightFormatter"))).output({with_location:!0,with_memo:!0})}(document)},{"./highlightFormatter":2}],5:[function(require,module,exports){var util={defineInnerTextForFirefox:function(){null==document.createElement("div").innerText&&Object.defineProperty(HTMLElement.prototype,"innerText",{get:function(){return this.textContent},set:function(v){this.textContent=v}})}};module.exports=util},{}]},{},[4]);
